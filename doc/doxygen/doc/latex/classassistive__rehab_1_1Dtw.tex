\section{assistive\+\_\+rehab\+:\+:Dtw Class Reference}
\label{classassistive__rehab_1_1Dtw}\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}


Class for D\+TW (Dynamic Time Warping).  




{\ttfamily \#include $<$dtw.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classassistive__rehab_1_1Dtw_a0d7ee684ba230b3c8289f7edd58b18da}} 
\hyperlink{classassistive__rehab_1_1Dtw_a0d7ee684ba230b3c8289f7edd58b18da}{Dtw} ()
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\hyperlink{classassistive__rehab_1_1Dtw_adb11d58b5482f14ade22f5f630a24843}{Dtw} (const int \&win\+\_\+)
\begin{DoxyCompactList}\small\item\em Overloaded constructor. \end{DoxyCompactList}\item 
void \hyperlink{classassistive__rehab_1_1Dtw_a0e3012c72cf4c10a53b914ea7f670e10}{align} (const std\+::vector$<$ double $>$ \&s, const std\+::vector$<$ double $>$ \&t, std\+::vector$<$ double $>$ \&ws, std\+::vector$<$ double $>$ \&wt)
\begin{DoxyCompactList}\small\item\em Align two 1D temporal sequences s,t. \end{DoxyCompactList}\item 
void \hyperlink{classassistive__rehab_1_1Dtw_ac63edfdf11768f9e74df20a952c538d3}{align} (const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&s, const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&t, std\+::vector$<$ std\+::vector$<$ double $>$ $>$ \&ws, std\+::vector$<$ std\+::vector$<$ double $>$ $>$ \&wt)
\begin{DoxyCompactList}\small\item\em Align two ND temporal sequences s,t. \end{DoxyCompactList}\item 
double \hyperlink{classassistive__rehab_1_1Dtw_ab530a2ea914ddab06899dfc511a13eed}{get\+Distance} () const
\begin{DoxyCompactList}\small\item\em Retrieve the optimal distance. \end{DoxyCompactList}\item 
\mbox{\label{classassistive__rehab_1_1Dtw_a8d81b36760d197ede52df4c47bedb3ab}} 
virtual \hyperlink{classassistive__rehab_1_1Dtw_a8d81b36760d197ede52df4c47bedb3ab}{$\sim$\+Dtw} ()
\begin{DoxyCompactList}\small\item\em Virtual destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
yarp\+::sig\+::\+Matrix \hyperlink{classassistive__rehab_1_1Dtw_a9b3ce7097b8646230f2f9a918126bbef}{initialize} (const int ns, const int nt) const
\begin{DoxyCompactList}\small\item\em Set the elements of the distance matrix to -\/1, except the (0,0) element set at 0. \end{DoxyCompactList}\item 
void \hyperlink{classassistive__rehab_1_1Dtw_ab5e7ac2f9658d042c39c0801def854e7}{get\+Warping\+Path} (const yarp\+::sig\+::\+Matrix \&dist\+Mat, std\+::vector$<$ int $>$ \&ws, std\+::vector$<$ int $>$ \&wt) const
\begin{DoxyCompactList}\small\item\em Retrieve the optimal warping path. \end{DoxyCompactList}\item 
double \hyperlink{classassistive__rehab_1_1Dtw_a05a9a7736a0c162303d15ff4f7936b50}{compute\+Distance} (const std\+::vector$<$ double $>$ \&s, const std\+::vector$<$ double $>$ \&t, yarp\+::sig\+::\+Matrix \&dist\+Mat) const
\begin{DoxyCompactList}\small\item\em Compute the D\+TW distance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{classassistive__rehab_1_1Dtw_a136ae6493254529accbdcf73cdce4ce6}} 
int \hyperlink{classassistive__rehab_1_1Dtw_a136ae6493254529accbdcf73cdce4ce6}{win}
\begin{DoxyCompactList}\small\item\em window length where the warping path is searched \end{DoxyCompactList}\item 
\mbox{\label{classassistive__rehab_1_1Dtw_a2931d56d23435f12a7697dde5ec605ed}} 
double \hyperlink{classassistive__rehab_1_1Dtw_a2931d56d23435f12a7697dde5ec605ed}{d}
\begin{DoxyCompactList}\small\item\em dtw distance \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class for D\+TW (Dynamic Time Warping). 

Definition at line 75 of file dtw.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\label{classassistive__rehab_1_1Dtw_adb11d58b5482f14ade22f5f630a24843}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!Dtw@{Dtw}}
\index{Dtw@{Dtw}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{Dtw()}{Dtw()}}
{\footnotesize\ttfamily Dtw\+::\+Dtw (\begin{DoxyParamCaption}\item[{const int \&}]{win\+\_\+ }\end{DoxyParamCaption})}



Overloaded constructor. 


\begin{DoxyParams}{Parameters}
{\em win\+\_\+} & window length where we look for the warping path. If win\+\_\+ = -\/1, the search is carried out on the whole distance matrix. \\
\hline
\end{DoxyParams}


Definition at line 26 of file dtw.\+cpp.



References win.


\begin{DoxyCode}
26                          : Dtw()
27 \{
28     win = win\_;
29 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\label{classassistive__rehab_1_1Dtw_a0e3012c72cf4c10a53b914ea7f670e10}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!align@{align}}
\index{align@{align}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{align()}{align()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void assistive\+\_\+rehab\+::\+Dtw\+::align (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{s,  }\item[{const std\+::vector$<$ double $>$ \&}]{t,  }\item[{std\+::vector$<$ double $>$ \&}]{ws,  }\item[{std\+::vector$<$ double $>$ \&}]{wt }\end{DoxyParamCaption})}



Align two 1D temporal sequences s,t. 


\begin{DoxyParams}{Parameters}
{\em s} & vector containing the input signal s. \\
\hline
{\em t} & vector containing the input signal t. \\
\hline
{\em ws} & vector containing the aligned output s. \\
\hline
{\em wt} & vector containing the aligned output t. \\
\hline
\end{DoxyParams}


Referenced by get\+Warping\+Path().

\mbox{\label{classassistive__rehab_1_1Dtw_ac63edfdf11768f9e74df20a952c538d3}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!align@{align}}
\index{align@{align}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{align()}{align()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void assistive\+\_\+rehab\+::\+Dtw\+::align (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&}]{s,  }\item[{const std\+::vector$<$ std\+::vector$<$ double $>$$>$ \&}]{t,  }\item[{std\+::vector$<$ std\+::vector$<$ double $>$ $>$ \&}]{ws,  }\item[{std\+::vector$<$ std\+::vector$<$ double $>$ $>$ \&}]{wt }\end{DoxyParamCaption})}



Align two ND temporal sequences s,t. 


\begin{DoxyParams}{Parameters}
{\em s} & vector of vectors containing the N components over time of the input signal s. \\
\hline
{\em t} & vector of vectors containing the N components over time of the input signal t. \\
\hline
{\em ws} & vector of vectors containing the N components over time of the aligned output s. \\
\hline
{\em wt} & vector of vectors containing the N components over time of the aligned output t. \\
\hline
\end{DoxyParams}
\mbox{\label{classassistive__rehab_1_1Dtw_a05a9a7736a0c162303d15ff4f7936b50}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!compute\+Distance@{compute\+Distance}}
\index{compute\+Distance@{compute\+Distance}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{compute\+Distance()}{computeDistance()}}
{\footnotesize\ttfamily double Dtw\+::compute\+Distance (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{s,  }\item[{const std\+::vector$<$ double $>$ \&}]{t,  }\item[{yarp\+::sig\+::\+Matrix \&}]{dist\+Mat }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Compute the D\+TW distance. 


\begin{DoxyParams}{Parameters}
{\em s} & vector containing input signal s. \\
\hline
{\em t} & vector containing input signal t. \\
\hline
{\em dist\+Mat} & matrix containing the output distance matrix. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
D\+TW distance. 
\end{DoxyReturn}


Definition at line 47 of file dtw.\+cpp.



References win.



Referenced by get\+Warping\+Path().


\begin{DoxyCode}
48 \{
49     \textcolor{comment}{//compute distance matrix}
50     \textcolor{keywordtype}{int} ns=(int)s.size();
51     \textcolor{keywordtype}{int} nt=(int)t.size();
52     \textcolor{keywordtype}{int} j1,j2;
53     \textcolor{keywordtype}{double} cost,temp;
54     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=1;i<=ns;i++)
55     \{
56         \textcolor{keywordflow}{if}(win==-1)
57         \{
58             j1=1;
59             j2=nt;
60         \}
61         \textcolor{keywordflow}{else}
62         \{
63             j1= i-win>1 ? i-win : 1;
64             j2= i+win<nt ? i+win : nt;
65         \}
66         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=j1;j<=j2;j++)
67         \{
68             cost=sqrt((s[i-1]-t[j-1])*(s[i-1]-t[j-1]));
69             temp=distMat[i-1][j];
70             \textcolor{keywordflow}{if}(distMat[i][j-1]!=-1)
71             \{
72                 \textcolor{keywordflow}{if}(temp==-1 || distMat[i][j-1]<temp)
73                     temp=distMat[i][j-1];
74             \}
75             \textcolor{keywordflow}{if}(distMat[i-1][j-1]!=-1)
76             \{
77                 \textcolor{keywordflow}{if}(temp==-1 || distMat[i-1][j-1]<temp)
78                     temp=distMat[i-1][j-1];
79             \}
80             distMat[i][j]=cost+temp;
81         \}
82     \}
83 
84     \textcolor{keywordflow}{return}(distMat[ns][nt]/nt);
85 \}
\end{DoxyCode}
\mbox{\label{classassistive__rehab_1_1Dtw_ab530a2ea914ddab06899dfc511a13eed}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!get\+Distance@{get\+Distance}}
\index{get\+Distance@{get\+Distance}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{get\+Distance()}{getDistance()}}
{\footnotesize\ttfamily double assistive\+\_\+rehab\+::\+Dtw\+::get\+Distance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Retrieve the optimal distance. 

\begin{DoxyReturn}{Returns}
optimal distance. 
\end{DoxyReturn}


Definition at line 145 of file dtw.\+h.



References d.


\begin{DoxyCode}
145 \{ \textcolor{keywordflow}{return} d; \}
\end{DoxyCode}
\mbox{\label{classassistive__rehab_1_1Dtw_ab5e7ac2f9658d042c39c0801def854e7}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!get\+Warping\+Path@{get\+Warping\+Path}}
\index{get\+Warping\+Path@{get\+Warping\+Path}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{get\+Warping\+Path()}{getWarpingPath()}}
{\footnotesize\ttfamily void Dtw\+::get\+Warping\+Path (\begin{DoxyParamCaption}\item[{const yarp\+::sig\+::\+Matrix \&}]{dist\+Mat,  }\item[{std\+::vector$<$ int $>$ \&}]{ws,  }\item[{std\+::vector$<$ int $>$ \&}]{wt }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Retrieve the optimal warping path. 


\begin{DoxyParams}{Parameters}
{\em dist\+Mat} & distance matrix. \\
\hline
{\em ws} & vector containing the output warping path of s. \\
\hline
{\em wt} & vector containing the output warping path of t. \\
\hline
\end{DoxyParams}


Definition at line 87 of file dtw.\+cpp.



References align(), compute\+Distance(), d, and initialize().


\begin{DoxyCode}
88 \{
89     \textcolor{keywordtype}{int} m=(int)distMat.rows()-1;
90     \textcolor{keywordtype}{int} n=(int)distMat.cols()-1;
91     \textcolor{keywordtype}{double} temp;
92 
93     ws.push\_back(m);
94     wt.push\_back(n);
95     \textcolor{keywordflow}{while}( (n+m) != 2 )
96     \{
97         \textcolor{keywordflow}{if}( (n-1)==0 )
98         \{
99             m=m-1;
100         \}
101         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( (m-1)==0 )
102         \{
103             n=n-1;
104         \}
105         \textcolor{keywordflow}{else}
106         \{
107             temp=distMat[m-1][n];
108             \textcolor{keywordtype}{int} c=0;
109             \textcolor{keywordflow}{if}(distMat[m][n-1]<temp)
110             \{
111                 temp=distMat[m][n-1];
112                 c=1;
113             \}
114             \textcolor{keywordflow}{if}(distMat[m-1][n-1]<temp)
115             \{
116                 temp=distMat[m-1][n-1];
117                 c=2;
118             \}
119 
120             \textcolor{keywordflow}{switch} (c)
121             \{
122             \textcolor{keywordflow}{case} 0:
123                 m=m-1;
124                 \textcolor{keywordflow}{break};
125             \textcolor{keywordflow}{case} 1:
126                 n=n-1;
127                 \textcolor{keywordflow}{break};
128             \textcolor{keywordflow}{case} 2:
129                 m=m-1;
130                 n=n-1;
131                 \textcolor{keywordflow}{break};
132             \}
133         \}
134 
135         ws.push\_back(m);
136         wt.push\_back(n);
137     \}
138 
139 \}
\end{DoxyCode}
\mbox{\label{classassistive__rehab_1_1Dtw_a9b3ce7097b8646230f2f9a918126bbef}} 
\index{assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}!initialize@{initialize}}
\index{initialize@{initialize}!assistive\+\_\+rehab\+::\+Dtw@{assistive\+\_\+rehab\+::\+Dtw}}
\subsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily Matrix Dtw\+::initialize (\begin{DoxyParamCaption}\item[{const int}]{ns,  }\item[{const int}]{nt }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Set the elements of the distance matrix to -\/1, except the (0,0) element set at 0. 


\begin{DoxyParams}{Parameters}
{\em ns} & length of input vector s. \\
\hline
{\em nt} & length of input vector t. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a ns x nt distance matrix. 
\end{DoxyReturn}


Definition at line 31 of file dtw.\+cpp.



Referenced by get\+Warping\+Path().


\begin{DoxyCode}
32 \{
33     Matrix distMat(ns+1,nt+1);
34 
35     \textcolor{comment}{//initialize distance matrix}
36     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<ns+1;i++)
37     \{
38         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0;j<nt+1;j++)
39         \{
40             distMat[i][j]=-1;
41         \}
42     \}
43     distMat[0][0]=0;
44     \textcolor{keywordflow}{return} distMat;
45 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/assistive-\/rehab/assistive-\/rehab/gh-\/pages/lib/include/\+Assistive\+Rehab/dtw.\+h\item 
/home/runner/work/assistive-\/rehab/assistive-\/rehab/gh-\/pages/lib/src/\hyperlink{dtw_8cpp}{dtw.\+cpp}\end{DoxyCompactItemize}
